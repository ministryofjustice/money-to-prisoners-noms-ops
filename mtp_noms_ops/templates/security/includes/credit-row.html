{% load i18n %}
{% load security %}

<td>
  {{ credit.received_at|date:'DATE_FORMAT' }}
</td>

<td>
  {% if not credit.prisoner_name %}
    {% trans 'Unknown prisoner' %}
  {% elif link_prisoner %}
    <a href="{{ credit|prisoner_profile_search_url }}" title="{% trans 'View prisoner details' %}" class="mtp-print-url-hidden">
      {{ credit.prisoner_number }}
    </a>
    <br/>
    {{ credit.prisoner_name }}
  {% else %}
    {{ credit.prisoner_number }}
    <br/>
    {{ credit.prisoner_name }}
  {% endif %}
</td>

<td class="mtp-credit-arrow-cell__condensed">
  <div class="mtp-credit-arrow">
    <span class="visually-hidden">{{ credit.source|credit_source }}</span>
  </div>
</td>

<td>
  {% if link_sender %}
    <a href="{{ credit|sender_profile_search_url }}" title="{% trans 'View payment source details' %}" class="mtp-print-url-hidden">
      {{ credit.sender_name|default:_('Sender details not recorded') }}
    </a>
  {% else %}
    {{ credit.sender_name|default:_('Sender details not recorded') }}
  {% endif %}
  <br/>
  {% blocktrans trimmed with payment_method=credit.source|credit_source|lower %}
    by {{ payment_method }}
  {% endblocktrans %}
</td>

<td class="number">
  <a href="{% url 'security:credit_detail' credit_id=credit.id %}" title="{% trans 'View credit details' %}" class="mtp-print-url-hidden">
    {{ credit.amount|currency }}
  </a>
</td>

<td>
  {{ credit.prison_name|default_if_none:'â€”' }}
</td>

<td>
  {% if credit.resolution == 'credited' %}
    {{ credit.credited_at.date }}
  {% elif credit.resolution == 'refunded' %}
    {% trans 'Refunded' %}
  {% else %}
    {% trans 'No' %}
  {% endif %}
</td>
